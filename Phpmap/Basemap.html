
<!DOCTYPE html>
<html>
<head>
    <meta charset= "utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Semester 1 Group Project</title>
    <!--Leaflet-->
    <!--include leaflet CSS-->
    <link rel="stylesheet" href="lib/leaflet/leaflet.css"/>
    <script src="jquery/jquery-3.1.1.min.js"></script>
    <!--include leaflet javascript file-->
    <script src="lib/leaflet/leaflet.js"></script>
    <script type="text/javascript" src="leaflet-ajax-2.1.0/dist/leaflet.ajax.js"></script>
    <!--include geosearch files-->
    <link rel="stylesheet" href="lib/L.GeoSearch-develop/src/css/l.geosearch.css" />
    <script src="lib/L.GeoSearch-develop/src/js/l.control.geosearch.js"></script>
    <script src="lib/L.GeoSearch-develop/src/js/l.geosearch.provider.openstreetmap.js"></script>
    <!--include sidebar files-->
    <script src="https://use.fontawesome.com/fea527cdc3.js"></script>
    <link rel="stylesheet" href="lib/sidebar-v2-master/css/leaflet-sidebar.css" />
    <script type="text/javascript" src="lib/sidebar-v2-master/js/leaflet-sidebar.js"></script>
    <!--include geoJson file-->
    <style type="text/css">
        <!--to get a full screen map-->
        body {
            padding: 0;
            margin: 0;
        }
        html, body,#mapid{
            height:100%;
            width:100%;
        }
    </style>
</head>
<body>

<div id="sidebar" class="sidebar collapsed">
    <!-- Nav tabs -->
    <div class="sidebar-tabs">
        <ul role="tablist">
            <li><a href="#home" role="tab"><i class="fa fa-search"></i></a></li>
            <li><a href="#ageStructure" role="tab"><i class="fa fa-bar-chart"></i></a></li>
            <li><a href="#parks" role="tab"><i class="fa fa-leaf"></i></a></li>
            <li><a href="https://github.com/spunktl/1.Semester" role="tab" target="_blank"><i class="fa fa-github"></i></a></li>
        </ul>

        <ul role="tablist">
            <li><a href="#settings" role="tab"><i class="fa fa-cogs"></i></a></li>
        </ul>
    </div>
    0
    <!-- Tab panes -->
    <div class="sidebar-content">
        <div class="sidebar-pane" id="home">
            <h1 class="sidebar-header">
                search address
                <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
            </h1>

            <p>Enter an address in Copenhagen to get an analysis of the location:</p>

            <p>
            <form id="searchAddress">
                <input type="text" />
                <button> onclick="sqlfunction()">GO</button>
            </form>
            </p>

            <p class="lorem">text</p>

            <p class="lorem">text</p>

            <p class="lorem">text</p>
        </div>

        <div class="sidebar-pane" id="ageStructure">
            <h1 class="sidebar-header">age structure<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
        </div>

        <div class="sidebar-pane" id="parks">
            <h1 class="sidebar-header">parks in the area<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
        </div>

        <div class="sidebar-pane" id="settings">
            <h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
        </div>
    </div>
</div>

<!--div element with id where you want your map to be-->
<div id="mapid"></div>

<script>

    var nongeo;
    var adressedata;
    var geojsonphp;
    var adress = "Guldbergsgade 101";
    var agedata;
    var rode_nr = 36;


    //		<!--initialize the map and set its view to chosen geographical coordinates and zoom level-->
    var mymap = L.map('mapid').setView([55.676, 12.568], 12);

    <!--load a tile layer Mapbox Streets tile layer-->
    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery ï¿½ <a href="http://mapbox.com">Mapbox</a>',
        maxZoom: 18,
        id:'clarineo.23o81n9e',
        accessToken:'pk.eyJ1IjoiY2xhcmluZW8iLCJhIjoiY2l2aDJocjZ0MDA1ajJvb3djeTdidWxyaSJ9.HVE2DplZgfv5T4FSUqah7A'
    }).addTo(mymap);

    new L.Control.GeoSearch({
        provider: new L.GeoSearch.Provider.OpenStreetMap(),
        showPopup: true
    }).addTo(mymap);

    var sidebar = L.control.sidebar('sidebar', {position: 'right'}).addTo(mymap);



    //    load geoJson files-->
    //TEST WITH OTHER BASEMAP
    function sqlfunction() {
        //getJSON - adress being the variable for thr SQL that gets inserted in the PHP document we call.
        $.getJSON('php/Adressgetjson.php?adresse=' + adress, function (msg) {
            console.log(msg);
            adressedata = msg;
            //alert(msg);
            var geojsonphp3 = new L.GeoJSON(msg, {
                onEachFeature: function (feature, layer) {
                    layer.bindPopup("<strong>" + feature.properties.adresse + "</strong><br/>")
                }
            }).addTo(mymap);
        });
    }

    //var geojsonphp2 = new L.GeoJSON.addTo(mymap);


    /*    load geoJson files-->
     var geojsonphp2 = new L.GeoJSON.AJAX(["php/age.php?adresse=text"],{onEachFeature:function( feature, layer ){
     layer.bindPopup( "<strong>" + feature.properties.distriktsnavnrode + "</strong><br/>")
     //  }
     //  }).addTo(mymap);
     //	 function onEachFeature( feature, layer){
     //      var popupContent = feature.properties.distriktsnavnrode;
     //	  layer.bindPopup( "<strong>" + feature.properties.distriktsnavnrode + "</strong>)

     //TEST WITH OTHER BASEMAP
     //function onEachFeature(feature, layer) {
     // does this feature have a property named popupContent?
     //   if (feature.properties && feature.properties.distriktsnavnrode) {
     //      layer.bindPopup(feature.properties.distriktsnavnrode);
     //   }
     //}
     */


</script>
</body>
</html>

